#!/usr/bin/env python3
"""
{{ description }}

This file was auto-generated by RoboDSL.
"""

from launch import LaunchDescription
from launch_ros.actions import Node
from launch.actions import DeclareLaunchArgument
from launch.substitutions import LaunchConfiguration

def generate_launch_description():
    # Declare launch arguments
    launch_arguments = [
        DeclareLaunchArgument(
            'use_sim_time',
            default_value='false',
            description='Use simulation time'
        ),
        DeclareLaunchArgument(
            'log_level',
            default_value='info',
            description='Log level for all nodes'
        ),
    ]
    
    # Create nodes
    nodes = []
{% for node in nodes %}
    # {{ node.name }} node
    {{ node.name }}_node = Node(
        package='{{ node.package }}',
        executable='{{ node.executable }}',
        name='{{ node.name }}_node',
        namespace='{{ node.namespace }}',
        output='screen',
        parameters=[
{% for param in node.parameters %}
            {'{{ param.name }}': {{ param.value }}},
{% endfor %}
            {'use_sim_time': LaunchConfiguration('use_sim_time')},
        ],
        arguments=['--ros-args', '--log-level', LaunchConfiguration('log_level')],
    )
    nodes.append({{ node.name }}_node)
{% endfor %}

    return LaunchDescription(launch_arguments + nodes) 